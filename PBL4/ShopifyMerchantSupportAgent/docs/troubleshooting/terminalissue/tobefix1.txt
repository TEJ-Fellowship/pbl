cd PBL4/ShopifyMerchantSupportAgent/backend/ && npm run api

> shopify-merchant-support-agent-tier2@2.0.0 api
> node --watch server.js

ğŸš€ API Server is running on port http://localhost:3000
ğŸ“¡ Health check: http://localhost:3000/health
ğŸ’¬ Chat API: http://localhost:3000/api/chat
âœ… MongoDB connected successfully
âœ… MongoDB connected successfully
âœ… MongoDB connected successfully
Analytics dashboard request with filters: {
  dateFrom: undefined,
  dateTo: undefined,
  merchantSegment: undefined,
  intent: undefined
}
Processed filters: {}
Analytics data generated: { totalQuestions: 0, topQuestionsCount: 0, intentDistributionKeys: 0 }
Analytics dashboard request with filters: {
  dateFrom: undefined,
  dateTo: undefined,
  merchantSegment: undefined,
  intent: undefined
}
Processed filters: {}
Analytics data generated: { totalQuestions: 0, topQuestionsCount: 0, intentDistributionKeys: 0 }
âœ… MongoDB connected successfully
ğŸ” Initializing hybrid retriever...
ğŸ“ Found 16 chunk files to process
ğŸ“„ Processing chunks_api.json: 29 chunks
ğŸ“„ Processing chunks_api_admin_graphql.json: 121 chunks
ğŸ“„ Processing chunks_api_admin_rest.json: 175 chunks
ğŸ“„ Processing chunks_api_orders.json: 114 chunks
ğŸ“„ Processing chunks_api_products.json: 112 chunks
ğŸ“„ Processing chunks_api_storefront.json: 197 chunks
ğŸ“„ Processing chunks_forum.json: 0 chunks
ğŸ“„ Processing chunks_getting_started.json: 1 chunks
ğŸ“„ Processing chunks_helpcenter.json: 1 chunks
ğŸ“„ Processing chunks_manual_getting_started.json: 1 chunks
ğŸ“„ Processing chunks_manual_orders.json: 1 chunks
ğŸ“„ Processing chunks_manual_products.json: 1 chunks
ğŸ“„ Processing chunks_orders.json: 1 chunks
ğŸ“„ Processing chunks_products.json: 1 chunks
ğŸ“„ Processing chunks_theme.json: 23 chunks
ğŸ“„ Processing chunks_theme_liquid.json: 4 chunks
âœ… Hybrid retriever initialized with 782 documents
ğŸ” Keyword index built with FlexSearch
ğŸ“Š Semantic search ready with Pinecone
ğŸ”§ MCP Tools initialized: [
  'calculator',
  'web_search',
  'shopify_status',
  'date_time',
  'code_validator',
  'currency_converter',
  'theme_compatibility'
]
ğŸ”§ MCP Orchestrator initialized successfully
ğŸ¯ Intent Classification Service initialized successfully
ğŸ’¡ Proactive Suggestions Service initialized successfully
ğŸ“Š Analytics Service initialized successfully
âœ… MongoDB connected successfully
ğŸ¯ Query classified as: shopify_related
ğŸ”§ Should use web search: false
ğŸ”§ Should use MCP tools: false
ğŸ”§ Should use RAG: true
ğŸ¯ Intent classified as: general (confidence: 0.7)
ğŸ” Processed query: "what is shopify ecommerce platform store?"
ğŸ” Performing semantic search...
ğŸ” Performing keyword search...
ğŸ“Š Keyword search found 72 results
ğŸ” Top keyword result: doc-1760246618679-551
ğŸ”„ Applying fusion ranking...
âœ… Hybrid search completed: 8 results
ğŸ“Š Semantic weight: 0.7, Keyword weight: 0.3
ğŸ’¡ Getting proactive suggestions for intent: general
ğŸ’¡ Rule-based suggestions: 0
ğŸ¤– Generating AI suggestions for: what is shopify?...
ğŸ¤– AI response: ```json
[
  {
    "suggestion": "Start a free trial to experience how easy it is to set up an online store. You can quickly add your first products, choose a professional theme, and understand the bas...
ğŸ¤– Cleaned response: [
  {
    "suggestion": "Start a free trial to experience how easy it is to set up an online store. You can quickly add your first products, choose a professional theme, and understand the basic flow ...
ğŸ¤– Parsed AI suggestions: 3
ğŸ’¡ AI-generated suggestions: 3
ğŸ’¡ Total unique suggestions: 3
ğŸ’¡ Final suggestions to return: 3
ğŸ’¡ Generated 3 proactive suggestions
ğŸ“Š Tracked question: what is shopify? (general)
ğŸ“Š Tracked question for analytics
ğŸ”§ Web search check: shouldUseWeb=true, confidence=0.72375
ğŸ”§ General knowledge check: isGeneralKnowledgeQuery=true, isNotShopifyRelated=false
ğŸ”§ MCP Decision for query: "what is shopify?" (confidence: 0.72375)
ğŸ”§ Tools selected: [web_search]
ğŸ”§ Using MCP tools: web_search
ğŸ” Performing web search for: what is shopify? (confidence: 0.72375)
âœ… MongoDB connected successfully
âœ… MongoDB connected successfully
ğŸ¯ Query classified as: mathematical
ğŸ”§ Should use web search: false
ğŸ”§ Should use MCP tools: true
ğŸ”§ Should use RAG: true
ğŸ”§ Routing mathematical query to MCP tools: "how to add products using api?"
ğŸ”§ Web search check: shouldUseWeb=true, confidence=0.9
ğŸ”§ General knowledge check: isGeneralKnowledgeQuery=false, isNotShopifyRelated=true
ğŸ”§ MCP Decision for query: "how to add products using api?" (confidence: 0.9)
ğŸ”§ Tools selected: [code_validator, currency_converter]
ğŸ”§ Using MCP tools: code_validator, currency_converter
ğŸ” Validating code/API elements: how to add products using api?
ğŸ’± Performing currency conversion for: how to add products using api?
